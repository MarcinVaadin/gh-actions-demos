name: Add PR comment

on:
  pull_request:
    branches: [ "main" ]

jobs:
  comment:
    name: Add PR comment
    runs-on: ubuntu-latest
    permissions:
      pull-requests: write
    steps:
    - name: Touch file
      run: touch test
    - name: Check empty directory
      run: |
        echo "failed=`ls | wc -l | bc`" >> $GITHUB_ENV
    - name: test
      run: echo ${{ env.failed }}
    - uses: mshick/add-pr-comment@v2
      with:
        status: ${{ (env.failed == 0 && 'success') || (env.failed > 0 && 'failure') }}
        refresh-message-position: true
        message: ok?
        message-success: |
          Tests passed.
        message-failure: |
          Tests failed.
   
