name: Add PR comment

on:
  pull_request:
    branches: [ "main" ]

jobs:
  comment:
    name: Add PR comment
    runs-on: ubuntu-latest
    permissions:
      pull-requests: write
    steps:
    - name: Touch file
      run: touch test
    - name: Check empty directory
      run: echo "failed=`ls | wc -l | bc`" >> $GITHUB_ENV
    - name: test
      run: echo ${{ env.failed }}
    - if: ${{ env.failed > 0 }}
      uses: mshick/add-pr-comment@v2
      with:
        message: |
          Tests failed.
    - if: ${{ env.failed == 0 }}
      uses: mshick/add-pr-comment@v2
      with:
        message: |
          Tests OK.

